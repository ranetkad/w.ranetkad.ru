# BGP - атрибуты

## Коротко

Характеристики маршрутов для принятия решений о выборе пути.
Старший бит: 0 = well-known, 1 = optional. Второй бит: 0 = non-transitive, 1 = transitive.

## AS_PATH

Последовательность номеров AS, через которые прошел маршрут.

- При отправке eBGP-соседу: добавляется своя AS слева
- При отправке iBGP-соседу: не меняется
- Защита от петель: если своя AS в пути - маршрут отбрасывается

Типы сегментов:

- AS_SET - неупорядоченный список
- AS_SEQUENCE - упорядоченный список

## NEXT_HOP

IP следующего хопа. Если недоступен в RIB - маршрут не устанавливается.

- eBGP: next-hop-self (меняется на свой IP)
- iBGP: next-hop-unchanged (не меняется)

## LOCAL_PREF

Приоритет пути внутри AS. Выше значение - лучше маршрут.

- Распространяется только внутри AS
- Управление исходящим трафиком
- При получении от eBGP - ставится значение по умолчанию

## MED (MULTI_EXIT_DISC)

Подсказка соседней AS какой путь предпочтительнее.

- Управление входящим трафиком
- Не передается дальше (не транзитивный)
- Часто наследуется из метрики IGP

## ORIGIN

Как маршрут появился в BGP:

- IGP - внутренний для AS
- EGP - получен через EGP
- INCOMPLETE - иным способом (redistribute)

## COMMUNITY

Метки для группировки маршрутов и применения политик.

Форматы:

- Standard: `ASN:VALUE` (16 bit каждое)
- Extended: 16 bit ASN + 6 байт значения
- Large: 32 bit ASN, формат `ASN:VALUE1:VALUE2`

## ATOMIC_AGGREGATE

Флаг: маршрут создан суммаризацией, возможна потеря информации.

## AGGREGATOR

AS и router-id роутера, создавшего суммарный маршрут.
