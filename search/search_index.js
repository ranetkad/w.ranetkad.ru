var __index = {"config":{"lang":["ru"],"separator":"[\\s\\-\\.]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"Home","text":"<p>?????</p>"},{"location":"databases/postgresql/admin.html","title":"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"databases/postgresql/admin.html#_1","title":"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"databases/postgresql/admin.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0411\u0414/\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u043f\u0440\u0430\u0432\u0430, \u0431\u044d\u043a\u0430\u043f\u044b. \u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0432 psql \u0438\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u0443\u0442\u0438\u043b\u0438\u0442\u044b pg_dump/pg_restore.</p>"},{"location":"databases/postgresql/admin.html#_3","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445:</p> SQL<pre><code>CREATE DATABASE mydb;\n</code></pre> <p>\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445:</p> SQL<pre><code>DROP DATABASE mydb;\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:</p> SQL<pre><code>CREATE USER myuser WITH PASSWORD 'secret';\n</code></pre> <p>\u0412\u044b\u0434\u0430\u0442\u044c \u0432\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u043d\u0430 \u0411\u0414:</p> SQL<pre><code>GRANT ALL PRIVILEGES ON DATABASE mydb TO myuser;\n</code></pre> <p>\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c:</p> SQL<pre><code>ALTER USER myuser WITH PASSWORD 'newpass';\n</code></pre> <p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:</p> SQL<pre><code>DROP USER myuser;\n</code></pre>"},{"location":"databases/postgresql/admin.html#_4","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<p>\u0411\u044d\u043a\u0430\u043f \u0431\u0430\u0437\u044b \u0432 SQL-\u0444\u0430\u0439\u043b:</p> Bash<pre><code>pg_dump -d mydb -f backup.sql\n</code></pre> <p>\u0411\u044d\u043a\u0430\u043f \u0432 \u0441\u0436\u0430\u0442\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0411\u0414):</p> Bash<pre><code>pg_dump -d mydb -Fc -f backup.dump\n</code></pre> <p>\u0411\u044d\u043a\u0430\u043f \u043e\u0434\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b:</p> Bash<pre><code>pg_dump -d mydb -t users -f users.sql\n</code></pre> <p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u0437 SQL-\u0444\u0430\u0439\u043b\u0430:</p> Bash<pre><code>psql -d mydb -f backup.sql\n</code></pre> <p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u0437 \u0441\u0436\u0430\u0442\u043e\u0433\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u0430:</p> Bash<pre><code>pg_restore -d mydb backup.dump\n</code></pre> <p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441 \u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435\u043c \u0411\u0414:</p> Bash<pre><code>pg_restore -C -d postgres backup.dump\n</code></pre> <p>\u0424\u043b\u0430\u0433 <code>-C</code> \u0441\u043e\u0437\u0434\u0430\u0441\u0442 \u0411\u0414 \u043f\u0435\u0440\u0435\u0434 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u043c.</p> <p>\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 (\u0431\u044b\u0441\u0442\u0440\u0435\u0435):</p> Bash<pre><code>pg_restore -d mydb -j 4 backup.dump\n</code></pre>"},{"location":"databases/postgresql/psql.html","title":"psql","text":""},{"location":"databases/postgresql/psql.html#psql","title":"psql","text":""},{"location":"databases/postgresql/psql.html#_1","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u041a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442 \u0434\u043b\u044f PostgreSQL. \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0411\u0414, \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 SQL, \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b. \u041c\u0435\u0442\u0430-\u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0442\u0441\u044f \u0441 <code>\\</code>. SQL-\u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u044e\u0442\u0441\u044f <code>;</code>.</p>"},{"location":"databases/postgresql/psql.html#_2","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435:</p> Bash<pre><code>psql -U postgres -d mydb -h localhost -p 5432\n</code></pre> <p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u0411\u0414 \u043f\u043e\u0434 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c postgres.</p> Bash<pre><code>psql \"postgresql://user:pass@host:5432/dbname\"\n</code></pre> <p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 URI.</p> <p>\u041c\u0435\u0442\u0430-\u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0432\u043d\u0443\u0442\u0440\u0438 psql:</p> SQL<pre><code>\\l\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u0431\u0430\u0437 \u0434\u0430\u043d\u043d\u044b\u0445.</p> SQL<pre><code>\\c dbname\n</code></pre> <p>\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0411\u0414.</p> SQL<pre><code>\\dt\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446 \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0441\u0445\u0435\u043c\u0435.</p> SQL<pre><code>\\d tablename\n</code></pre> <p>\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u044b (\u043a\u043e\u043b\u043e\u043d\u043a\u0438, \u0442\u0438\u043f\u044b, \u0438\u043d\u0434\u0435\u043a\u0441\u044b).</p> SQL<pre><code>\\du\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439/\u0440\u043e\u043b\u0435\u0439.</p> SQL<pre><code>\\q\n</code></pre> <p>\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 psql.</p> SQL<pre><code>\\?\n</code></pre> <p>\u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043f\u043e \u043c\u0435\u0442\u0430-\u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c.</p>"},{"location":"databases/postgresql/psql.html#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c SQL \u0431\u0435\u0437 \u0432\u0445\u043e\u0434\u0430 \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c:</p> Bash<pre><code>psql -d mydb -c \"SELECT * FROM users LIMIT 10;\"\n</code></pre> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c SQL-\u0444\u0430\u0439\u043b:</p> Bash<pre><code>psql -d mydb -f script.sql\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446 \u0441 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\u043c\u0438:</p> SQL<pre><code>\\dt+\n</code></pre>"},{"location":"infrastructure/kubernetes/architecture.html","title":"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":""},{"location":"infrastructure/kubernetes/architecture.html#_1","title":"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":""},{"location":"infrastructure/kubernetes/architecture.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u041a\u043b\u0430\u0441\u0442\u0435\u0440 = Control Plane (\u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435) + Worker Nodes (\u0437\u0430\u043f\u0443\u0441\u043a \u043f\u043e\u0434\u043e\u0432). \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432 etcd. \u0412\u0441\u0435 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 API Server.</p>"},{"location":"infrastructure/kubernetes/architecture.html#control-plane","title":"Control Plane","text":"<p>kube-apiserver - REST API \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430, \u0435\u0434\u0438\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439.</p> <p>etcd - \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0435 key-value \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430.</p> <p>kube-scheduler - \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043f\u043e\u0434\u044b \u043f\u043e \u0443\u0437\u043b\u0430\u043c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a.</p> <p>kube-controller-manager - \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u044b (Node, Deployment, ReplicaSet \u0438 \u0434\u0440.).</p> <p>cloud-controller-manager - \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 \u043e\u0431\u043b\u0430\u0447\u043d\u044b\u043c\u0438 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u0430\u043c\u0438 (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e).</p>"},{"location":"infrastructure/kubernetes/architecture.html#worker-node","title":"Worker Node","text":"<p>kubelet - \u0430\u0433\u0435\u043d\u0442 \u043d\u0430 \u0443\u0437\u043b\u0435, \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043f\u043e\u0434\u044b, \u043e\u0442\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 API Server.</p> <p>kube-proxy - \u0441\u0435\u0442\u0435\u0432\u043e\u0439 \u043f\u0440\u043e\u043a\u0441\u0438, \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u043a \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c.</p> <p>Container Runtime - \u0437\u0430\u043f\u0443\u0441\u043a \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432 (containerd, CRI-O).</p>"},{"location":"infrastructure/kubernetes/architecture.html#_3","title":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<p>CoreDNS - DNS \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438\u043c\u0435\u043d \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430.</p> <p>CNI-\u043f\u043b\u0430\u0433\u0438\u043d - \u0441\u0435\u0442\u0435\u0432\u0430\u044f \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u0430 (Calico, Flannel, Cilium).</p>"},{"location":"infrastructure/kubernetes/architecture.html#etcd","title":"etcd","text":"<p>\u0411\u044d\u043a\u0430\u043f:</p> Bash<pre><code>etcdctl snapshot save backup.db\n</code></pre> <p>\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435:</p> Bash<pre><code>etcdctl snapshot restore backup.db\n</code></pre>"},{"location":"infrastructure/kubernetes/glossary.html","title":"\u0413\u043b\u043e\u0441\u0441\u0430\u0440\u0438\u0439","text":""},{"location":"infrastructure/kubernetes/glossary.html#_1","title":"\u0413\u043b\u043e\u0441\u0441\u0430\u0440\u0438\u0439","text":""},{"location":"infrastructure/kubernetes/glossary.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u044b Kubernetes. \u0427\u0442\u043e \u0435\u0441\u0442\u044c \u0447\u0442\u043e.</p>"},{"location":"infrastructure/kubernetes/glossary.html#workloads","title":"Workloads","text":"<p>Pod - \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0435\u0434\u0438\u043d\u0438\u0446\u0430, \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432.</p> <p>ReplicaSet - \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0440\u0435\u043f\u043b\u0438\u043a \u043f\u043e\u0434\u043e\u0432.</p> <p>Deployment - \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 ReplicaSet, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u043e\u0442\u043a\u0430\u0442\u044b.</p> <p>StatefulSet - \u0434\u043b\u044f stateful-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0441 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u043c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435\u043c \u0438 \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u044b\u043c\u0438 \u0438\u043c\u0435\u043d\u0430\u043c\u0438.</p> <p>DaemonSet - \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043f\u043e\u0434 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u0443\u0437\u043b\u0435.</p> <p>Job - \u043e\u0434\u043d\u043e\u0440\u0430\u0437\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430, \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f.</p> <p>CronJob - \u0437\u0430\u043f\u0443\u0441\u043a Job \u043f\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044e.</p>"},{"location":"infrastructure/kubernetes/glossary.html#_3","title":"\u0421\u0435\u0442\u044c \u0438 \u0434\u043e\u0441\u0442\u0443\u043f","text":"<p>Service - \u0442\u043e\u0447\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0433\u0440\u0443\u043f\u043f\u0435 \u043f\u043e\u0434\u043e\u0432 (ClusterIP, NodePort, LoadBalancer).</p> <p>Ingress - \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044f HTTP/HTTPS \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u043a \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c.</p> <p>Ingress Controller - \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442, \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0449\u0438\u0439 Ingress-\u0440\u0435\u0441\u0443\u0440\u0441\u044b.</p> <p>NetworkPolicy - \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0441\u0435\u0442\u0435\u0432\u043e\u0439 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u0434\u0430\u043c\u0438.</p>"},{"location":"infrastructure/kubernetes/glossary.html#_4","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<p>ConfigMap - \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u043e\u0432 \u0432 \u0432\u0438\u0434\u0435 key-value.</p> <p>Secret - \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 (\u043f\u0430\u0440\u043e\u043b\u0438, \u0442\u043e\u043a\u0435\u043d\u044b).</p>"},{"location":"infrastructure/kubernetes/glossary.html#_5","title":"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435","text":"<p>PersistentVolume (PV) - \u0440\u0435\u0441\u0443\u0440\u0441 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435.</p> <p>PersistentVolumeClaim (PVC) - \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 PV \u043e\u0442 \u043f\u043e\u0434\u0430.</p> <p>StorageClass - \u0448\u0430\u0431\u043b\u043e\u043d \u0434\u043b\u044f \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f PV.</p>"},{"location":"infrastructure/kubernetes/glossary.html#_6","title":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f","text":"<p>Namespace - \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435.</p> <p>Label - \u043f\u0430\u0440\u0430 key-value \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432.</p> <p>Annotation - \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430.</p>"},{"location":"infrastructure/kubernetes/glossary.html#_7","title":"\u0420\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u043e\u0432","text":"<p>Node Selector - \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u043e\u0432 \u043f\u043e \u043c\u0435\u0442\u043a\u0430\u043c \u0443\u0437\u043b\u043e\u0432.</p> <p>Affinity - \u0433\u0438\u0431\u043a\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u044f (\u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f/\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f).</p> <p>Taints/Tolerations - \u0437\u0430\u043f\u0440\u0435\u0442 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u043d\u0430 \u0443\u0437\u043b\u0430\u0445, \u0435\u0441\u043b\u0438 \u043f\u043e\u0434 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 toleration.</p>"},{"location":"infrastructure/kubernetes/glossary.html#_8","title":"\u0420\u0435\u0441\u0443\u0440\u0441\u044b","text":"<p>Requests - \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0434\u0430 (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f scheduler).</p> <p>Limits - \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432, \u043f\u0440\u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0438\u0438 \u043f\u043e\u0434 \u0443\u0431\u0438\u0432\u0430\u0435\u0442\u0441\u044f (OOM).</p>"},{"location":"infrastructure/kubernetes/glossary.html#probes","title":"Probes","text":"<p>Liveness - \u0436\u0438\u0432 \u043b\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440, \u043f\u0440\u0438 \u0441\u0431\u043e\u0435 - \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a.</p> <p>Readiness - \u0433\u043e\u0442\u043e\u0432 \u043b\u0438 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0442\u0440\u0430\u0444\u0438\u043a, \u043f\u0440\u0438 \u0441\u0431\u043e\u0435 - \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 Service.</p> <p>Startup - \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435, \u0434\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430 liveness/readiness.</p> <p>\u0422\u0438\u043f\u044b \u043f\u0440\u043e\u0431: HTTP GET, TCP Socket, Exec, gRPC.</p>"},{"location":"infrastructure/kubernetes/kubectl.html","title":"kubectl","text":""},{"location":"infrastructure/kubernetes/kubectl.html#kubectl","title":"kubectl","text":""},{"location":"infrastructure/kubernetes/kubectl.html#_1","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>CLI \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u043e\u043c. \u0412\u0441\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440, \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435, \u043e\u0442\u043b\u0430\u0434\u043a\u0430.</p>"},{"location":"infrastructure/kubernetes/kubectl.html#_2","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432:</p> Bash<pre><code>kubectl get pods\n</code></pre> <p>\u041f\u043e\u0434\u044b \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c namespace.</p> Bash<pre><code>kubectl get pods -A\n</code></pre> <p>\u041f\u043e\u0434\u044b \u0432\u043e \u0432\u0441\u0435\u0445 namespace.</p> Bash<pre><code>kubectl get pods -o wide\n</code></pre> <p>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434 (IP, \u0443\u0437\u0435\u043b).</p> Bash<pre><code>kubectl get deploy,svc,pods\n</code></pre> <p>\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u0438\u043f\u043e\u0432 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0441\u0440\u0430\u0437\u0443.</p> <p>\u0414\u0435\u0442\u0430\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0430:</p> Bash<pre><code>kubectl describe pod my-pod\n</code></pre> <p>\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: \u0441\u043e\u0431\u044b\u0442\u0438\u044f, \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435, volumes.</p> <p>\u041b\u043e\u0433\u0438:</p> Bash<pre><code>kubectl logs my-pod\n</code></pre> <p>\u041b\u043e\u0433\u0438 \u043f\u043e\u0434\u0430.</p> Bash<pre><code>kubectl logs my-pod -f\n</code></pre> <p>\u0421\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u043b\u043e\u0433\u0430\u043c\u0438 (tail -f).</p> Bash<pre><code>kubectl logs my-pod -c my-container\n</code></pre> <p>\u041b\u043e\u0433\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 (\u0435\u0441\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e).</p> Bash<pre><code>kubectl logs my-pod --previous\n</code></pre> <p>\u041b\u043e\u0433\u0438 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430 (\u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u0441\u0442\u0430\u0440\u0442\u0430).</p> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434:</p> Bash<pre><code>kubectl exec my-pod -- ls /app\n</code></pre> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0432 \u043f\u043e\u0434\u0435.</p> Bash<pre><code>kubectl exec -it my-pod -- /bin/sh\n</code></pre> <p>\u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 shell.</p> <p>\u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u043d\u0438\u0444\u0435\u0441\u0442\u043e\u0432:</p> Bash<pre><code>kubectl apply -f manifest.yaml\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c/\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0440\u0435\u0441\u0443\u0440\u0441\u044b \u0438\u0437 \u0444\u0430\u0439\u043b\u0430.</p> Bash<pre><code>kubectl apply -f ./manifests/\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b \u0438\u0437 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438.</p> <p>\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435:</p> Bash<pre><code>kubectl delete pod my-pod\n</code></pre> <p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0434.</p> Bash<pre><code>kubectl delete -f manifest.yaml\n</code></pre> <p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u0435\u0441\u0443\u0440\u0441\u044b \u0438\u0437 \u0444\u0430\u0439\u043b\u0430.</p> <p>\u041c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435:</p> Bash<pre><code>kubectl scale deployment my-deploy --replicas=3\n</code></pre> <p>\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0447\u0438\u0441\u043b\u043e \u0440\u0435\u043f\u043b\u0438\u043a.</p> <p>Rollout (\u0434\u0435\u043f\u043b\u043e\u0439):</p> Bash<pre><code>kubectl rollout status deployment/my-deploy\n</code></pre> <p>\u0421\u0442\u0430\u0442\u0443\u0441 \u0432\u044b\u043a\u0430\u0442\u043a\u0438.</p> Bash<pre><code>kubectl rollout history deployment/my-deploy\n</code></pre> <p>\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0440\u0435\u0432\u0438\u0437\u0438\u0439.</p> Bash<pre><code>kubectl rollout undo deployment/my-deploy\n</code></pre> <p>\u041e\u0442\u043a\u0430\u0442 \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e.</p> Bash<pre><code>kubectl rollout restart deployment/my-deploy\n</code></pre> <p>\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u043f\u043e\u0434\u043e\u0432 \u0434\u0435\u043f\u043b\u043e\u0439\u043c\u0435\u043d\u0442\u0430.</p>"},{"location":"infrastructure/kubernetes/kubectl.html#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<p>\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u0434\u044b \u043f\u043e \u043b\u0435\u0439\u0431\u043b\u0443:</p> Bash<pre><code>kubectl get pods -l app=nginx\n</code></pre> <p>\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438:</p> Bash<pre><code>kubectl get pods -w\n</code></pre> <p>\u0412\u044b\u0432\u043e\u0434 \u0432 YAML:</p> Bash<pre><code>kubectl get pod my-pod -o yaml\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c deployment:</p> Bash<pre><code>kubectl create deployment nginx --image=nginx\n</code></pre> <p>\u041f\u0440\u043e\u0431\u0440\u043e\u0441 \u043f\u043e\u0440\u0442\u0430 \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438:</p> Bash<pre><code>kubectl port-forward pod/my-pod 8080:80\n</code></pre>"},{"location":"infrastructure/openstack/cli.html","title":"CLI","text":""},{"location":"infrastructure/openstack/cli.html#cli","title":"CLI","text":""},{"location":"infrastructure/openstack/cli.html#_1","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>Unified CLI \u0434\u043b\u044f OpenStack. \u041f\u0435\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043d\u0443\u0436\u043d\u043e source keystonerc \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430.</p>"},{"location":"infrastructure/openstack/cli.html#_2","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f:</p> Bash<pre><code>source keystonerc_admin\n</code></pre> <p>\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c credentials \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f.</p> <p>\u0421\u0435\u0440\u0432\u0435\u0440\u044b (\u0412\u041c):</p> Bash<pre><code>openstack server list\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0412\u041c.</p> Bash<pre><code>openstack server show my-server\n</code></pre> <p>\u0414\u0435\u0442\u0430\u043b\u0438 \u0412\u041c.</p> Bash<pre><code>openstack server create --image ubuntu --flavor m1.small --network private my-server\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0412\u041c.</p> Bash<pre><code>openstack server delete my-server\n</code></pre> <p>\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0412\u041c.</p> Bash<pre><code>openstack server stop my-server\nopenstack server start my-server\n</code></pre> <p>\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c/\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0412\u041c.</p> <p>\u041e\u0431\u0440\u0430\u0437\u044b:</p> Bash<pre><code>openstack image list\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0431\u0440\u0430\u0437\u043e\u0432.</p> <p>Flavors:</p> Bash<pre><code>openstack flavor list\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a flavor (\u0442\u0438\u043f\u043e\u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0412\u041c).</p> Bash<pre><code>openstack flavor create --ram 512 --disk 10 --vcpus 1 m1.tiny\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c flavor.</p> <p>\u0421\u0435\u0442\u044c:</p> Bash<pre><code>openstack network list\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0435\u0442\u0435\u0439.</p> Bash<pre><code>openstack network create my-network\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0435\u0442\u044c.</p> Bash<pre><code>openstack subnet create --network my-network --subnet-range 192.168.1.0/24 my-subnet\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0434\u0441\u0435\u0442\u044c.</p> <p>\u0422\u043e\u043c\u0430:</p> Bash<pre><code>openstack volume list\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u043c\u043e\u0432.</p> Bash<pre><code>openstack volume create --size 10 my-volume\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u043c 10 GB.</p> Bash<pre><code>openstack server add volume my-server my-volume\n</code></pre> <p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u043e\u043c \u043a \u0412\u041c.</p> <p>Security Groups:</p> Bash<pre><code>openstack security group list\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f.</p> Bash<pre><code>openstack security group rule create default --protocol tcp --dst-port 22\n</code></pre> <p>\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c SSH.</p> Bash<pre><code>openstack security group rule create default --protocol icmp\n</code></pre> <p>\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c ping.</p>"},{"location":"infrastructure/openstack/cli.html#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<p>\u0412\u044b\u0432\u043e\u0434 \u0432 JSON:</p> Bash<pre><code>openstack server list -f json\n</code></pre> <p>\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f:</p> Bash<pre><code>openstack server list | grep running\n</code></pre>"},{"location":"infrastructure/openstack/services.html","title":"\u0421\u0435\u0440\u0432\u0438\u0441\u044b","text":""},{"location":"infrastructure/openstack/services.html#_1","title":"\u0421\u0435\u0440\u0432\u0438\u0441\u044b","text":""},{"location":"infrastructure/openstack/services.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b OpenStack: \u043f\u043e\u0440\u0442\u044b, \u043a\u043e\u043d\u0444\u0438\u0433\u0438, \u043b\u043e\u0433\u0438. \u0411\u044b\u0441\u0442\u0440\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430.</p>"},{"location":"infrastructure/openstack/services.html#keystone-identity","title":"Keystone (Identity)","text":"<p>\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f.</p> <ul> <li>\u041f\u043e\u0440\u0442\u044b: 5000, 35357</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433: <code>/etc/keystone/keystone.conf</code></li> <li>\u041b\u043e\u0433\u0438: <code>/var/log/keystone.log</code></li> <li>\u041f\u0430\u043a\u0435\u0442: <code>openstack-keystone</code></li> </ul>"},{"location":"infrastructure/openstack/services.html#nova-compute","title":"Nova (Compute)","text":"<p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u043c\u0430\u0448\u0438\u043d\u0430\u043c\u0438.</p> <ul> <li>\u041f\u043e\u0440\u0442\u044b: 8774 (API), 8775, 5900-5999 (VNC)</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433: <code>/etc/nova/nova.conf</code></li> <li>\u041b\u043e\u0433\u0438: <code>/var/log/nova/</code></li> <li>\u041f\u0430\u043a\u0435\u0442: <code>openstack-nova</code></li> <li>\u0421\u0435\u0440\u0432\u0438\u0441\u044b: <code>openstack-nova-api</code>, <code>openstack-nova-scheduler</code>, <code>openstack-nova-conductor</code>, <code>openstack-nova-compute</code></li> </ul>"},{"location":"infrastructure/openstack/services.html#glance-image","title":"Glance (Image)","text":"<p>\u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0437\u043e\u0432 \u0412\u041c.</p> <ul> <li>\u041f\u043e\u0440\u0442: 9292</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0438: <code>/etc/glance/glance-api.conf</code>, <code>/etc/glance/glance-registry.conf</code></li> <li>\u041b\u043e\u0433\u0438: <code>/var/log/glance/</code></li> <li>\u041f\u0430\u043a\u0435\u0442: <code>openstack-glance</code></li> <li>\u0421\u0435\u0440\u0432\u0438\u0441\u044b: <code>openstack-glance-api</code>, <code>openstack-glance-registry</code></li> </ul>"},{"location":"infrastructure/openstack/services.html#neutron-networking","title":"Neutron (Networking)","text":"<p>\u0421\u0435\u0442\u044c \u0434\u043b\u044f \u0412\u041c.</p> <ul> <li>\u041f\u043e\u0440\u0442: 9696</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0438: <code>/etc/neutron/</code></li> <li>\u041b\u043e\u0433\u0438: <code>/var/log/neutron/</code></li> <li>\u041f\u0430\u043a\u0435\u0442: <code>openstack-neutron</code></li> </ul>"},{"location":"infrastructure/openstack/services.html#cinder-block-storage","title":"Cinder (Block Storage)","text":"<p>\u0411\u043b\u043e\u0447\u043d\u044b\u0435 \u0442\u043e\u043c\u0430 \u0434\u043b\u044f \u0412\u041c.</p> <ul> <li>\u041f\u043e\u0440\u0442\u044b: 8776 (API), 3260 (iSCSI)</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433: <code>/etc/cinder/cinder.conf</code></li> <li>\u041b\u043e\u0433\u0438: <code>/var/log/cinder/</code></li> <li>\u041f\u0430\u043a\u0435\u0442: <code>openstack-cinder</code></li> <li>\u0421\u0435\u0440\u0432\u0438\u0441\u044b: <code>openstack-cinder-api</code>, <code>openstack-cinder-scheduler</code>, <code>openstack-cinder-volume</code></li> </ul>"},{"location":"infrastructure/openstack/services.html#swift-object-storage","title":"Swift (Object Storage)","text":"<p>\u041e\u0431\u044a\u0435\u043a\u0442\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435.</p> <ul> <li>\u041f\u043e\u0440\u0442\u044b: 8080 (proxy), 6000-6002, 873 (rsync)</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0438: <code>/etc/swift/</code></li> <li>\u041b\u043e\u0433\u0438: <code>/var/log/messages</code></li> <li>\u041f\u0430\u043a\u0435\u0442\u044b: <code>openstack-swift-*</code></li> <li>\u0421\u0435\u0440\u0432\u0438\u0441\u044b: <code>openstack-swift-proxy</code>, <code>openstack-swift-object</code>, <code>openstack-swift-container</code>, <code>openstack-swift-account</code></li> </ul>"},{"location":"networking/bgp/index.html","title":"\u041e\u0431\u0437\u043e\u0440","text":""},{"location":"networking/bgp/index.html#_1","title":"\u041e\u0431\u0437\u043e\u0440","text":""},{"location":"networking/bgp/index.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>Border Gateway Protocol - \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u0435\u0436\u0434\u0443 \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u044b\u043c\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u043c\u0438 (AS). \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u043e\u0432\u0435\u0440\u0445 TCP:179. Path-vector \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b - \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432, \u0430 \u043d\u0435 \u043c\u0435\u0442\u0440\u0438\u043a\u0438.</p> <p>\u041a\u043e\u0433\u0434\u0430 \u043d\u0443\u0436\u0435\u043d: - \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u0430\u043c (multihoming) - \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u043c/\u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u043c \u0442\u0440\u0430\u0444\u0438\u043a\u043e\u043c - \u041e\u0431\u043c\u0435\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\u043c\u0438 \u043c\u0435\u0436\u0434\u0443 AS</p>"},{"location":"networking/bgp/index.html#mp-bgp","title":"MP-BGP","text":"<p>Multiprotocol BGP (RFC 4760) - \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u0438 \u0442\u0438\u043f\u043e\u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432. \u041a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0439 BGP \u0443\u043c\u0435\u043b \u0442\u043e\u043b\u044c\u043a\u043e IPv4 unicast. MP-BGP \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 address families.</p>"},{"location":"networking/bgp/index.html#afisafi","title":"AFI/SAFI","text":"<p>AFI (Address Family Identifier) - \u0442\u0438\u043f \u0430\u0434\u0440\u0435\u0441\u0430\u0446\u0438\u0438:</p> <ul> <li>1 - IPv4</li> <li>2 - IPv6</li> </ul> <p>SAFI (Subsequent AFI) - \u0442\u0438\u043f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438:</p> <ul> <li>1 - Unicast</li> <li>2 - Multicast</li> <li>128 - MPLS VPN</li> </ul> <p>\u041a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u0438:</p> <ul> <li>AFI 1, SAFI 1 - IPv4 Unicast (\u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0439 BGP)</li> <li>AFI 1, SAFI 128 - VPNv4 (L3VPN)</li> <li>AFI 2, SAFI 1 - IPv6 Unicast</li> <li>AFI 2, SAFI 128 - VPNv6</li> </ul>"},{"location":"networking/bgp/index.html#ebgp-vs-ibgp","title":"eBGP vs iBGP","text":"<p>eBGP (external):</p> <ul> <li>\u0421\u043e\u0441\u0435\u0434\u0438 \u0438\u0437 \u0440\u0430\u0437\u043d\u044b\u0445 AS</li> <li>TTL = 1 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e</li> <li>\u041c\u0435\u043d\u044f\u0435\u0442 NEXT_HOP \u043d\u0430 \u0441\u0435\u0431\u044f</li> <li>\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0432\u043e\u044e AS \u0432 AS_PATH</li> </ul> <p>iBGP (internal):</p> <ul> <li>\u0421\u043e\u0441\u0435\u0434\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u043e\u0434\u043d\u043e\u0439 AS</li> <li>TTL = 255</li> <li>\u041d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442 NEXT_HOP</li> <li>\u041d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 AS \u0432 AS_PATH</li> <li>\u0422\u0440\u0435\u0431\u0443\u0435\u0442 full-mesh \u0438\u043b\u0438 RR/confederation</li> </ul>"},{"location":"networking/bgp/index.html#_3","title":"\u0412\u044b\u0431\u043e\u0440 \u043b\u0443\u0447\u0448\u0435\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430","text":"<p>\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f (\u0441\u0432\u0435\u0440\u0445\u0443 \u0432\u043d\u0438\u0437, \u0434\u043e \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u0438\u044f):</p> <ol> <li>Weight (\u0432\u044b\u0448\u0435 \u043b\u0443\u0447\u0448\u0435, Cisco-specific)</li> <li>LOCAL_PREF (\u0432\u044b\u0448\u0435 \u043b\u0443\u0447\u0448\u0435)</li> <li>Locally originated</li> <li>AS_PATH (\u043a\u043e\u0440\u043e\u0447\u0435 \u043b\u0443\u0447\u0448\u0435)</li> <li>ORIGIN (IGP &gt; EGP &gt; Incomplete)</li> <li>MED (\u043d\u0438\u0436\u0435 \u043b\u0443\u0447\u0448\u0435)</li> <li>eBGP &gt; iBGP</li> <li>IGP metric \u0434\u043e NEXT_HOP (\u043d\u0438\u0436\u0435 \u043b\u0443\u0447\u0448\u0435)</li> <li>Oldest route</li> <li>Lowest Router ID</li> <li>Lowest neighbor IP</li> </ol>"},{"location":"networking/bgp/advanced.html","title":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","text":""},{"location":"networking/bgp/advanced.html#_1","title":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","text":""},{"location":"networking/bgp/advanced.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>Multipath, communities, add-path, BFD, route refresh \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0444\u0438\u0447\u0438 \u0434\u043b\u044f production.</p>"},{"location":"networking/bgp/advanced.html#multipath","title":"Multipath","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043f\u0443\u0442\u0435\u0439 \u0432 RIB \u0434\u043b\u044f \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0438. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e BGP \u0441\u0442\u0430\u0432\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0443\u0447\u0448\u0438\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442.</p> <p>eBGP multipath - \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0443\u0442\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u0440\u0430\u0437\u043d\u044b\u0435 AS:</p> Juniper Text Only<pre><code>set routing-options autonomous-system 65000\nset protocols bgp group UPSTREAM multipath\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  maximum load-balancing ebgp 4\n</code></pre> <p>iBGP multipath - \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0443\u0442\u0435\u0439 \u0432\u043d\u0443\u0442\u0440\u0438 AS:</p> Juniper Text Only<pre><code>set protocols bgp group INTERNAL multipath\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  maximum load-balancing ibgp 4\n</code></pre> <p>eiBGP multipath - \u0441\u043c\u0435\u0448\u0430\u043d\u043d\u044b\u0439 (eBGP + iBGP):</p> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  maximum load-balancing 4\n</code></pre>"},{"location":"networking/bgp/advanced.html#communities","title":"Communities","text":"<p>\u041c\u0435\u0442\u043a\u0438 \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u0438\u0442\u0438\u043a.</p> <p>\u0424\u043e\u0440\u043c\u0430\u0442\u044b:</p> <ul> <li>Standard: <code>AS:VALUE</code> (16 bit \u043a\u0430\u0436\u0434\u043e\u0435) - RFC 1997</li> <li>Extended: 6 \u0431\u0430\u0439\u0442 - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 VPN</li> <li>Large: <code>AS:VALUE1:VALUE2</code> (32 bit AS) - RFC 8092</li> </ul> <p>Well-known communities:</p> <ul> <li><code>no-export</code> - \u043d\u0435 \u0430\u043d\u043e\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u044b AS</li> <li><code>no-advertise</code> - \u043d\u0435 \u0430\u043d\u043e\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0438\u043a\u043e\u043c\u0443</li> <li><code>no-export-subconfed</code> - \u043d\u0435 \u0430\u043d\u043e\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430 \u043f\u0440\u0435\u0434\u0435\u043b\u044b sub-AS</li> </ul> Juniper Text Only<pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 community\nset policy-options community MY-COMM members 65000:100\n\nset policy-options policy-statement SET-COMM term 1 then community add MY-COMM\n\n# \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e community\nset policy-options policy-statement MATCH-COMM term 1 from community MY-COMM\nset policy-options policy-statement MATCH-COMM term 1 then accept\n</code></pre> Huawei Text Only<pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 community\nroute-policy SET-COMM permit node 10\n  apply community 65000:100\n\n# \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e community\nip community-filter basic MY-COMM permit 65000:100\nroute-policy MATCH-COMM permit node 10\n  if-match community-filter MY-COMM\n</code></pre> <p>no-export \u043f\u0440\u0438\u043c\u0435\u0440:</p> Juniper Text Only<pre><code>set policy-options policy-statement NO-EXPORT then community add no-export\n</code></pre> Huawei Text Only<pre><code>route-policy NO-EXPORT permit node 10\n  apply community no-export\n</code></pre>"},{"location":"networking/bgp/advanced.html#add-path","title":"Add-Path","text":"<p>\u0410\u043d\u043e\u043d\u0441 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043f\u0443\u0442\u0435\u0439 \u043a \u043e\u0434\u043d\u043e\u043c\u0443 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0443. \u041f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f RR - \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u044e\u0442 \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u044b.</p> Juniper Text Only<pre><code>set protocols bgp group RR-CLIENTS family inet unicast add-path send path-count 2\nset protocols bgp group RR-CLIENTS family inet unicast add-path receive\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  peer RR-CLIENTS advertise-ext-community\n  peer RR-CLIENTS advertise-community\n  peer RR-CLIENTS additional-paths send\n  peer RR-CLIENTS additional-paths receive\n</code></pre>"},{"location":"networking/bgp/advanced.html#bfd-bidirectional-forwarding-detection","title":"BFD (Bidirectional Forwarding Detection)","text":"<p>\u0411\u044b\u0441\u0442\u0440\u043e\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u0435 \u043f\u0430\u0434\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0435\u0434\u0430 (\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u044b \u0432\u043c\u0435\u0441\u0442\u043e Hold Timer).</p> Juniper Text Only<pre><code>set protocols bgp group UPSTREAM bfd-liveness-detection minimum-interval 300\nset protocols bgp group UPSTREAM bfd-liveness-detection multiplier 3\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 10.0.0.1 bfd enable\n  peer 10.0.0.1 bfd min-tx-interval 300 min-rx-interval 300 detect-multiplier 3\n</code></pre>"},{"location":"networking/bgp/advanced.html#route-refresh","title":"Route Refresh","text":"<p>\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u043e\u0442 \u0441\u043e\u0441\u0435\u0434\u0430 \u0431\u0435\u0437 \u0441\u0431\u0440\u043e\u0441\u0430 \u0441\u0435\u0441\u0441\u0438\u0438.</p> Juniper Text Only<pre><code># \u0412 CLI\nclear bgp neighbor 10.0.0.1 soft-inbound\n</code></pre> Huawei Text Only<pre><code># \u0412 CLI\nrefresh bgp 10.0.0.1 ipv4 unicast import\n</code></pre>"},{"location":"networking/bgp/advanced.html#graceful-restart","title":"Graceful Restart","text":"<p>\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 forwarding \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0435 BGP-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430. \u0421\u043e\u0441\u0435\u0434 \u043d\u0435 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b.</p> Juniper Text Only<pre><code>set routing-options graceful-restart\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  graceful-restart\n  graceful-restart timer restart 120\n</code></pre>"},{"location":"networking/bgp/advanced.html#next-hop-tracking","title":"Next-hop tracking","text":"<p>\u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 NEXT_HOP \u0447\u0435\u0440\u0435\u0437 IGP. \u041f\u0440\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 - \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u0443\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f.</p> Juniper Text Only<pre><code># \u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\nset protocols bgp group INTERNAL family inet unicast nexthop-resolution\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  nexthop recursive-lookup route-policy CHECK-NH\n</code></pre>"},{"location":"networking/bgp/advanced.html#selective-route-download","title":"Selective route download","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0432 RIB \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 (\u044d\u043a\u043e\u043d\u043e\u043c\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u0438).</p> Juniper Text Only<pre><code>set protocols bgp group UPSTREAM family inet unicast rib-group SELECTIVE\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  peer 10.0.0.1 route-policy ACCEPT-ONLY-DEFAULT import\n</code></pre>"},{"location":"networking/bgp/attributes.html","title":"\u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b","text":""},{"location":"networking/bgp/attributes.html#_1","title":"\u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b","text":""},{"location":"networking/bgp/attributes.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u043b\u0443\u0447\u0448\u0435\u0433\u043e \u043f\u0443\u0442\u0438. Well-known (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435) vs Optional. Transitive (\u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0434\u0430\u043b\u044c\u0448\u0435) vs Non-transitive.</p>"},{"location":"networking/bgp/attributes.html#_3","title":"\u041a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f","text":"<p>Well-known Mandatory - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b, \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442:</p> <ul> <li>ORIGIN</li> <li>AS_PATH</li> <li>NEXT_HOP</li> </ul> <p>Well-known Discretionary - \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b \u0432\u0441\u0435\u043c, \u043d\u043e \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b:</p> <ul> <li>LOCAL_PREF</li> <li>ATOMIC_AGGREGATE</li> </ul> <p>Optional Transitive - \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b, \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0434\u0430\u043b\u044c\u0448\u0435:</p> <ul> <li>AGGREGATOR</li> <li>COMMUNITY</li> </ul> <p>Optional Non-transitive - \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b, \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f:</p> <ul> <li>MED</li> <li>ORIGINATOR_ID</li> <li>CLUSTER_LIST</li> </ul>"},{"location":"networking/bgp/attributes.html#as_path","title":"AS_PATH","text":"<p>\u0421\u043f\u0438\u0441\u043e\u043a AS, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0448\u0435\u043b \u043c\u0430\u0440\u0448\u0440\u0443\u0442. \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0442\u0435\u043b\u044c.</p> <ul> <li>\u041f\u0440\u0438 eBGP: \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0432\u043e\u044f AS \u0441\u043b\u0435\u0432\u0430</li> <li>\u041f\u0440\u0438 iBGP: \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f</li> <li>\u0415\u0441\u043b\u0438 \u0441\u0432\u043e\u044f AS \u0432 \u043f\u0443\u0442\u0438 - \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u043e\u0442\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f</li> </ul> <p>AS_PATH prepend - \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0432\u043e\u0435\u0439 AS \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u0434\u043b\u044f \u0443\u0434\u043b\u0438\u043d\u0435\u043d\u0438\u044f \u043f\u0443\u0442\u0438:</p> Juniper Text Only<pre><code>set policy-options policy-statement PREPEND term 1 then as-path-prepend \"65000 65000 65000\"\n</code></pre> Huawei Text Only<pre><code>route-policy PREPEND permit node 10\n  apply as-path 65000 65000 65000 additive\n</code></pre>"},{"location":"networking/bgp/attributes.html#next_hop","title":"NEXT_HOP","text":"<p>IP \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0445\u043e\u043f\u0430. \u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0436\u0438\u043c \u0447\u0435\u0440\u0435\u0437 IGP.</p> <ul> <li>eBGP: \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430 IP \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f</li> <li>iBGP: \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f (\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043d\u0443\u0436\u0435\u043d IGP \u0434\u043e eBGP-\u0441\u043e\u0441\u0435\u0434\u0430)</li> </ul> <p>next-hop-self - \u043f\u0440\u0438\u043d\u0443\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439 IP:</p> Juniper Text Only<pre><code>set protocols bgp group INTERNAL export NHS\nset policy-options policy-statement NHS then next-hop self\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  peer IBGP-GROUP next-hop-local\n</code></pre>"},{"location":"networking/bgp/attributes.html#local_pref","title":"LOCAL_PREF","text":"<p>\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u043f\u0443\u0442\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 AS. \u0412\u044b\u0448\u0435 - \u043b\u0443\u0447\u0448\u0435. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 100. \u0420\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043d\u0443\u0442\u0440\u0438 AS (iBGP).</p> <p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u043c \u0442\u0440\u0430\u0444\u0438\u043a\u043e\u043c - \u043a\u0430\u043a\u043e\u0439 \u0432\u044b\u0445\u043e\u0434 \u0438\u0437 AS \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u0435\u0435.</p> Juniper Text Only<pre><code>set policy-options policy-statement SET-LP term 1 from neighbor 10.0.0.1\nset policy-options policy-statement SET-LP term 1 then local-preference 200\n</code></pre> Huawei Text Only<pre><code>route-policy PREFER-ISP1 permit node 10\n  apply local-preference 200\n#\nbgp 65000\n  peer 10.0.0.1 route-policy PREFER-ISP1 import\n</code></pre>"},{"location":"networking/bgp/attributes.html#med-multi-exit-discriminator","title":"MED (Multi-Exit Discriminator)","text":"<p>\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430 \u0441\u043e\u0441\u0435\u0434\u043d\u0435\u0439 AS \u043a\u0430\u043a\u043e\u0439 \u0432\u0445\u043e\u0434 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u0435\u0435. \u041d\u0438\u0436\u0435 - \u043b\u0443\u0447\u0448\u0435. Non-transitive - \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f \u0434\u0430\u043b\u044c\u0448\u0435 \u043f\u0435\u0440\u0432\u043e\u0439 AS.</p> <p>\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u043c \u0442\u0440\u0430\u0444\u0438\u043a\u043e\u043c.</p> Juniper Text Only<pre><code>set policy-options policy-statement SET-MED then metric 50\nset protocols bgp group UPSTREAM export SET-MED\n</code></pre> Huawei Text Only<pre><code>route-policy SET-MED permit node 10\n  apply cost 50\n#\nbgp 65000\n  peer 10.0.0.1 route-policy SET-MED export\n</code></pre>"},{"location":"networking/bgp/attributes.html#origin","title":"ORIGIN","text":"<p>\u041a\u0430\u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u043f\u043e\u043f\u0430\u043b \u0432 BGP:</p> <ul> <li>IGP (i) - \u043a\u043e\u043c\u0430\u043d\u0434\u0430 network</li> <li>EGP (e) - \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0439 EGP \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b</li> <li>Incomplete (?) - redistribute</li> </ul> <p>\u041f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0435: IGP &gt; EGP &gt; Incomplete.</p>"},{"location":"networking/bgp/attributes.html#weight-cisco-specific","title":"Weight (Cisco-specific)","text":"<p>\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0442\u0440\u0438\u0431\u0443\u0442, \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f. \u0412\u044b\u0448\u0435 - \u043b\u0443\u0447\u0448\u0435. \u041d\u0430 Juniper/Huawei \u0430\u043d\u0430\u043b\u043e\u0433\u0430 \u043d\u0435\u0442 - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 LOCAL_PREF.</p>"},{"location":"networking/bgp/attributes.html#_4","title":"\u0421\u0443\u043c\u043c\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u044f","text":"<p>aggregate - \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u043e\u0433\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430.</p> Juniper Text Only<pre><code>set routing-options aggregate route 10.0.0.0/16\n\nset policy-options policy-statement AGGREGATE term 1 from protocol aggregate\nset policy-options policy-statement AGGREGATE term 1 then accept\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  aggregate 10.0.0.0 255.255.0.0\n</code></pre> <p>as-set - \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 AS_PATH \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0432 \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u043e\u043c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0435:</p> Juniper Text Only<pre><code>set routing-options aggregate route 10.0.0.0/16 as-path origin IGP\nset routing-options aggregate route 10.0.0.0/16 as-path path \"65001 65002\"\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  aggregate 10.0.0.0 255.255.0.0 as-set\n</code></pre> <p>suppress-map / detail-suppressed - \u043f\u043e\u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u043e\u043b\u0435\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432:</p> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  aggregate 10.0.0.0 255.255.0.0 detail-suppressed\n</code></pre>"},{"location":"networking/bgp/filtering.html","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f","text":""},{"location":"networking/bgp/filtering.html#_1","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f","text":""},{"location":"networking/bgp/filtering.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0443\u0435\u0442 \u043a\u0430\u043a\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c (import) \u0438 \u043e\u0442\u0434\u0430\u0432\u0430\u0442\u044c (export). \u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b: prefix-list, as-path filter, route-map/policy.</p>"},{"location":"networking/bgp/filtering.html#prefix-list","title":"Prefix-list","text":"<p>\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430\u043c \u0438 \u043c\u0430\u0441\u043a\u0430\u043c.</p> Juniper Text Only<pre><code>set policy-options prefix-list ALLOWED 10.0.0.0/8\nset policy-options prefix-list ALLOWED 172.16.0.0/12\n\nset policy-options policy-statement IMPORT-FILTER term 1 from prefix-list ALLOWED\nset policy-options policy-statement IMPORT-FILTER term 1 then accept\nset policy-options policy-statement IMPORT-FILTER then reject\n\nset protocols bgp group UPSTREAM import IMPORT-FILTER\n</code></pre> Huawei Text Only<pre><code>ip ip-prefix ALLOWED index 10 permit 10.0.0.0 8\nip ip-prefix ALLOWED index 20 permit 172.16.0.0 12\n#\nroute-policy IMPORT-FILTER permit node 10\n  if-match ip-prefix ALLOWED\nroute-policy IMPORT-FILTER deny node 100\n#\nbgp 65000\n  peer 10.0.0.1 route-policy IMPORT-FILTER import\n</code></pre>"},{"location":"networking/bgp/filtering.html#route-filter-juniper-prefix","title":"route-filter (Juniper) / prefix \u0441 \u043c\u0430\u0441\u043a\u0430\u043c\u0438","text":"<p>\u0413\u0438\u0431\u043a\u0430\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0434\u043b\u0438\u043d\u044b \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430.</p> Juniper Text Only<pre><code># exact - \u0442\u043e\u0447\u043d\u043e\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435\nset policy-options policy-statement FILTER term 1 from route-filter 10.0.0.0/8 exact\n\n# orlonger - /8 \u0438 \u0431\u043e\u043b\u0435\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 (/9, /10, ...)\nset policy-options policy-statement FILTER term 2 from route-filter 10.0.0.0/8 orlonger\n\n# prefix-length-range - \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u0434\u043b\u0438\u043d\nset policy-options policy-statement FILTER term 3 from route-filter 10.0.0.0/8 prefix-length-range /16-/24\n\n# upto - \u0434\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u0438\u043d\u044b\nset policy-options policy-statement FILTER term 4 from route-filter 10.0.0.0/8 upto /16\n</code></pre> Huawei Text Only<pre><code># exact (equal)\nip ip-prefix EXACT index 10 permit 10.0.0.0 8\n\n# orlonger (le 32)\nip ip-prefix ORLONGER index 10 permit 10.0.0.0 8 less-equal 32\n\n# prefix-length-range\nip ip-prefix RANGE index 10 permit 10.0.0.0 8 greater-equal 16 less-equal 24\n</code></pre>"},{"location":"networking/bgp/filtering.html#as-path-filter","title":"AS-PATH filter","text":"<p>\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443 AS_PATH (regexp).</p> Juniper Text Only<pre><code># \u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u043e\u0442 \u043f\u0440\u044f\u043c\u043e\u0433\u043e \u0441\u043e\u0441\u0435\u0434\u0430 (\u043e\u0434\u043d\u0430 AS \u0432 \u043f\u0443\u0442\u0438)\nset policy-options as-path DIRECT \"^[0-9]+$\"\n\n# \u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u0447\u0435\u0440\u0435\u0437 AS 65001\nset policy-options as-path VIA-65001 \".*65001.*\"\n\n# \u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b originated AS 65002\nset policy-options as-path FROM-65002 \"65002$\"\n\nset policy-options policy-statement AS-FILTER term 1 from as-path DIRECT\nset policy-options policy-statement AS-FILTER term 1 then accept\n</code></pre> Huawei Text Only<pre><code>ip as-path-filter DIRECT index 10 permit ^[0-9]+$\nip as-path-filter VIA-65001 index 10 permit _65001_\nip as-path-filter FROM-65002 index 10 permit _65002$\n#\nroute-policy AS-FILTER permit node 10\n  if-match as-path-filter DIRECT\n</code></pre> <p>Regex \u0448\u0430\u0431\u043b\u043e\u043d\u044b:</p> <ul> <li><code>^</code> - \u043d\u0430\u0447\u0430\u043b\u043e \u0441\u0442\u0440\u043e\u043a\u0438</li> <li><code>$</code> - \u043a\u043e\u043d\u0435\u0446 \u0441\u0442\u0440\u043e\u043a\u0438</li> <li><code>.</code> - \u043b\u044e\u0431\u043e\u0439 \u0441\u0438\u043c\u0432\u043e\u043b</li> <li><code>*</code> - 0 \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0439</li> <li><code>+</code> - 1 \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0439</li> <li><code>[0-9]</code> - \u0446\u0438\u0444\u0440\u0430</li> <li><code>_</code> (Huawei) - \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c AS</li> </ul>"},{"location":"networking/bgp/filtering.html#_3","title":"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u0432","text":"<p>\u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p> Juniper Text Only<pre><code>set protocols bgp group CUSTOMER prefix-limit maximum 1000\nset protocols bgp group CUSTOMER prefix-limit teardown 80\nset protocols bgp group CUSTOMER prefix-limit teardown idle-timeout 30\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 10.0.0.1 route-limit 1000 80\n</code></pre> <p>\u041f\u0440\u0438 80% \u043b\u0438\u043c\u0438\u0442\u0430 - \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435. \u041f\u0440\u0438 100% - \u0441\u0435\u0441\u0441\u0438\u044f \u0440\u0432\u0435\u0442\u0441\u044f.</p>"},{"location":"networking/bgp/filtering.html#as_path","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e \u0434\u043b\u0438\u043d\u0435 AS_PATH","text":"<p>\u041e\u0442\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u0441 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u043c \u043f\u0443\u0442\u0435\u043c.</p> Juniper Text Only<pre><code>set policy-options policy-statement LIMIT-ASPATH term 1 from as-path-length 10 orlonger\nset policy-options policy-statement LIMIT-ASPATH term 1 then reject\n</code></pre> Huawei Text Only<pre><code>route-policy LIMIT-ASPATH deny node 10\n  if-match as-path-length 10 or-greater\nroute-policy LIMIT-ASPATH permit node 100\n</code></pre>"},{"location":"networking/bgp/filtering.html#_4","title":"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438","text":"<p>import (in) - \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u043e\u0442 \u0441\u043e\u0441\u0435\u0434\u0430.</p> <p>export (out) - \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u043a \u0441\u043e\u0441\u0435\u0434\u0443.</p> Juniper Text Only<pre><code>set protocols bgp group UPSTREAM import IMPORT-POLICY\nset protocols bgp group UPSTREAM export EXPORT-POLICY\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 10.0.0.1 route-policy IMPORT-POLICY import\n  peer 10.0.0.1 route-policy EXPORT-POLICY export\n</code></pre>"},{"location":"networking/bgp/neighbors.html","title":"\u0421\u043e\u0441\u0435\u0434\u0441\u0442\u0432\u043e","text":""},{"location":"networking/bgp/neighbors.html#_1","title":"\u0421\u043e\u0441\u0435\u0434\u0441\u0442\u0432\u043e","text":""},{"location":"networking/bgp/neighbors.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>BGP-\u0441\u0435\u0441\u0441\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0432\u0435\u0440\u0445 TCP:179. \u0421\u043e\u0441\u0435\u0434\u0438 \u043e\u0431\u043c\u0435\u043d\u0438\u0432\u0430\u044e\u0442\u0441\u044f OPEN, \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u044b\u0432\u0430\u044e\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u0437\u0430\u0442\u0435\u043c UPDATE \u0441 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\u043c\u0438.</p>"},{"location":"networking/bgp/neighbors.html#_3","title":"\u0422\u0438\u043f\u044b \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439","text":"<p>OPEN - \u043f\u0435\u0440\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0441\u043b\u0435 TCP handshake:</p> <ul> <li>BGP version (4)</li> <li>Local AS number</li> <li>Hold Time (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 180 \u0441\u0435\u043a)</li> <li>BGP Identifier (Router ID)</li> <li>Capabilities (MP-BGP, route refresh \u0438 \u0434\u0440.)</li> </ul> <p>UPDATE - \u043e\u0431\u043c\u0435\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439:</p> <ul> <li>Withdrawn Routes - \u043e\u0442\u0437\u044b\u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432</li> <li>Path Attributes - \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u043f\u0443\u0442\u0438</li> <li>NLRI - \u0430\u043d\u043e\u043d\u0441\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u044b</li> </ul> <p>KEEPALIVE - \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438:</p> <ul> <li>\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u0436\u0434\u044b\u0435 \u2153 \u043e\u0442 Hold Time (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 60 \u0441\u0435\u043a)</li> <li>\u0415\u0441\u043b\u0438 3 KEEPALIVE \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u044b - \u0441\u0435\u0441\u0441\u0438\u044f \u043f\u0430\u0434\u0430\u0435\u0442</li> </ul> <p>NOTIFICATION - \u043e\u0448\u0438\u0431\u043a\u0430, \u0441\u0435\u0441\u0441\u0438\u044f \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f:</p> <ul> <li>Hold Timer Expired</li> <li>Cease (\u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0431\u0440\u043e\u0441)</li> <li>Bad AS, Bad Router ID \u0438 \u0434\u0440.</li> </ul>"},{"location":"networking/bgp/neighbors.html#fsm-finite-state-machine","title":"FSM (Finite State Machine)","text":"<ol> <li>Idle - \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435, \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0435\u0442</li> <li>Connect - \u0436\u0434\u0435\u0442 TCP-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435</li> <li>Active - \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c TCP</li> <li>OpenSent - \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b OPEN, \u0436\u0434\u0435\u0442 \u043e\u0442\u0432\u0435\u0442</li> <li>OpenConfirm - \u043f\u043e\u043b\u0443\u0447\u0438\u043b OPEN, \u0436\u0434\u0435\u0442 KEEPALIVE</li> <li>Established - \u0441\u0435\u0441\u0441\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430, \u043e\u0431\u043c\u0435\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\u043c\u0438</li> </ol> <p>\u041a\u043e\u043b\u043b\u0438\u0437\u0438\u044f: \u0435\u0441\u043b\u0438 \u043e\u0431\u0430 \u0438\u043d\u0438\u0446\u0438\u0438\u0440\u0443\u044e\u0442 TCP - \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043e\u0442 \u0440\u043e\u0443\u0442\u0435\u0440\u0430 \u0441 \u0431\u043e\u043b\u044c\u0448\u0438\u043c Router ID.</p>"},{"location":"networking/bgp/neighbors.html#_4","title":"\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f","text":"<p>MD5 - \u043f\u043e\u0434\u043f\u0438\u0441\u044c TCP-\u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432 \u043e\u0431\u0449\u0438\u043c \u043a\u043b\u044e\u0447\u043e\u043c. \u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u0441\u043f\u0443\u0444\u0438\u043d\u0433\u0430.</p> Juniper Text Only<pre><code>set protocols bgp group PEERS authentication-key \"secret123\"\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 10.0.0.1 password cipher secret123\n</code></pre>"},{"location":"networking/bgp/neighbors.html#_5","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":""},{"location":"networking/bgp/neighbors.html#ebgp","title":"eBGP","text":"Juniper Text Only<pre><code>set protocols bgp group UPSTREAM type external\nset protocols bgp group UPSTREAM peer-as 65001\nset protocols bgp group UPSTREAM neighbor 192.168.1.1\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 192.168.1.1 as-number 65001\n#\nipv4-family unicast\n  peer 192.168.1.1 enable\n</code></pre>"},{"location":"networking/bgp/neighbors.html#ibgp-loopback","title":"iBGP (\u0447\u0435\u0440\u0435\u0437 loopback)","text":"Juniper Text Only<pre><code>set protocols bgp group INTERNAL type internal\nset protocols bgp group INTERNAL local-address 10.255.0.1\nset protocols bgp group INTERNAL neighbor 10.255.0.2\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 10.255.0.2 as-number 65000\n  peer 10.255.0.2 connect-interface LoopBack0\n#\nipv4-family unicast\n  peer 10.255.0.2 enable\n</code></pre>"},{"location":"networking/bgp/neighbors.html#ebgp-multihop","title":"eBGP multihop","text":"<p>\u0414\u043b\u044f \u0441\u043e\u0441\u0435\u0434\u0441\u0442\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 loopback \u043c\u0435\u0436\u0434\u0443 AS (TTL &gt; 1).</p> Juniper Text Only<pre><code>set protocols bgp group EBGP-MULTIHOP multihop ttl 2\nset protocols bgp group EBGP-MULTIHOP local-address 10.255.0.1\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 10.255.1.1 ebgp-max-hop 2\n  peer 10.255.1.1 connect-interface LoopBack0\n</code></pre>"},{"location":"networking/bgp/nlri.html","title":"\u0410\u043d\u043e\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"networking/bgp/nlri.html#_1","title":"\u0410\u043d\u043e\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"networking/bgp/nlri.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>NLRI (Network Layer Reachability Information) - \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 BGP \u0430\u043d\u043e\u043d\u0441\u0438\u0440\u0443\u0435\u0442 \u0441\u043e\u0441\u0435\u0434\u044f\u043c. \u0414\u0432\u0430 \u0441\u043f\u043e\u0441\u043e\u0431\u0430: \u044f\u0432\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 (network) \u0438 \u0440\u0435\u0434\u0438\u0441\u0442\u0440\u0438\u0431\u0443\u0446\u0438\u044f \u0438\u0437 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432.</p>"},{"location":"networking/bgp/nlri.html#network","title":"network","text":"<p>\u042f\u0432\u043d\u043e\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u0432 BGP. \u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 RIB (\u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u0438).</p> Juniper Text Only<pre><code>set policy-options policy-statement EXPORT-DIRECT term 1 from protocol direct\nset policy-options policy-statement EXPORT-DIRECT term 1 from route-filter 10.0.0.0/24 exact\nset policy-options policy-statement EXPORT-DIRECT term 1 then accept\n\nset protocols bgp group PEERS export EXPORT-DIRECT\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  network 10.0.0.0 255.255.255.0\n</code></pre> <p>\u0412\u0430\u0436\u043d\u043e: \u0432 Juniper \u043d\u0435\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u044b network - \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f export policy.</p>"},{"location":"networking/bgp/nlri.html#redistribute-import-igp","title":"redistribute (import \u0438\u0437 IGP)","text":"<p>\u0418\u043c\u043f\u043e\u0440\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u0438\u0437 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 (OSPF, IS-IS, static, connected).</p> Juniper Text Only<pre><code>set policy-options policy-statement REDIST-OSPF term 1 from protocol ospf\nset policy-options policy-statement REDIST-OSPF term 1 then accept\n\nset protocols bgp group PEERS export REDIST-OSPF\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  import-route ospf 1\n  import-route direct\n  import-route static\n</code></pre>"},{"location":"networking/bgp/nlri.html#_3","title":"\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u043f\u0440\u0438 \u0430\u043d\u043e\u043d\u0441\u0435","text":"<p>\u041c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b (MED, community, as-path) \u043f\u0440\u0438 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0435.</p> Juniper Text Only<pre><code>set policy-options policy-statement SET-MED term 1 from route-filter 10.0.0.0/24 exact\nset policy-options policy-statement SET-MED term 1 then metric 100\nset policy-options policy-statement SET-MED term 1 then accept\n</code></pre> Huawei Text Only<pre><code>route-policy SET-MED permit node 10\n  if-match ip-prefix MY-PREFIX\n  apply cost 100\n#\nbgp 65000\n  peer 10.0.0.1 route-policy SET-MED export\n</code></pre>"},{"location":"networking/bgp/nlri.html#default-originate","title":"default-originate","text":"<p>\u0410\u043d\u043e\u043d\u0441 default route (0.0.0.0/0) \u0441\u043e\u0441\u0435\u0434\u0443.</p> Juniper Text Only<pre><code>set policy-options policy-statement SEND-DEFAULT term 1 from route-filter 0.0.0.0/0 exact\nset policy-options policy-statement SEND-DEFAULT term 1 then accept\n\nset routing-options generate route 0.0.0.0/0 discard\nset protocols bgp group DOWNSTREAM export SEND-DEFAULT\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n#\nipv4-family unicast\n  peer 10.0.0.1 default-route-advertise\n</code></pre>"},{"location":"networking/bgp/scaling.html","title":"\u041c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"networking/bgp/scaling.html#_1","title":"\u041c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":""},{"location":"networking/bgp/scaling.html#_2","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 iBGP: \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f full-mesh (n*(n-1)/2 \u0441\u0435\u0441\u0441\u0438\u0439). \u0420\u0435\u0448\u0435\u043d\u0438\u044f: Route Reflector, Confederation, peer-group/templates.</p>"},{"location":"networking/bgp/scaling.html#route-reflector","title":"Route Reflector","text":"<p>RR \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0438 \u043e\u0442\u0440\u0430\u0436\u0430\u0435\u0442 \u0438\u0445 \u0434\u0440\u0443\u0433\u0438\u043c \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c. \u041a\u043b\u0438\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0443\u0436\u043d\u044b full-mesh \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439 - \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u0441\u0441\u0438\u044f \u0441 RR.</p> <p>\u0420\u043e\u043b\u0438:</p> <ul> <li>RR (Route Reflector) - \u043e\u0442\u0440\u0430\u0436\u0430\u0435\u0442 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u044b</li> <li>RR Client - \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u043a RR</li> <li>Non-client - \u043e\u0431\u044b\u0447\u043d\u044b\u0439 iBGP-\u0441\u043e\u0441\u0435\u0434</li> </ul> <p>\u0410\u0442\u0440\u0438\u0431\u0443\u0442\u044b:</p> <ul> <li>ORIGINATOR_ID - router-id \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430</li> <li>CLUSTER_LIST - \u0441\u043f\u0438\u0441\u043e\u043a cluster-id \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0445 RR</li> </ul> <p>\u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u043f\u0435\u0442\u0435\u043b\u044c: \u0435\u0441\u043b\u0438 \u0441\u0432\u043e\u0439 router-id \u0432 ORIGINATOR_ID \u0438\u043b\u0438 cluster-id \u0432 CLUSTER_LIST - \u043c\u0430\u0440\u0448\u0440\u0443\u0442 \u043e\u0442\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f.</p> Juniper Text Only<pre><code># \u041d\u0430 RR\nset protocols bgp group RR-CLIENTS type internal\nset protocols bgp group RR-CLIENTS cluster 1.1.1.1\nset protocols bgp group RR-CLIENTS neighbor 10.0.0.2\nset protocols bgp group RR-CLIENTS neighbor 10.0.0.3\n</code></pre> Huawei Text Only<pre><code># \u041d\u0430 RR\nbgp 65000\n  reflector cluster-id 1.1.1.1\n  peer 10.0.0.2 as-number 65000\n  peer 10.0.0.3 as-number 65000\n#\nipv4-family unicast\n  peer 10.0.0.2 reflect-client\n  peer 10.0.0.3 reflect-client\n</code></pre> <p>\u0418\u0435\u0440\u0430\u0440\u0445\u0438\u044f RR:</p> <p>\u041c\u043e\u0436\u043d\u043e \u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0443\u0440\u043e\u0432\u043d\u0435\u0439 RR \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0441\u0435\u0442\u0435\u0439. RR \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f non-client \u0434\u0440\u0443\u0433 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0430.</p>"},{"location":"networking/bgp/scaling.html#confederation","title":"Confederation","text":"<p>AS \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 sub-AS. \u041c\u0435\u0436\u0434\u0443 sub-AS - eBGP-\u043f\u043e\u0434\u043e\u0431\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435, \u043d\u043e AS_PATH \u043d\u0435 \u0443\u0434\u043b\u0438\u043d\u044f\u0435\u0442\u0441\u044f \u0441\u043d\u0430\u0440\u0443\u0436\u0438.</p> Juniper Text Only<pre><code>set routing-options autonomous-system 65000\nset routing-options confederation 65000 members 65001\nset routing-options confederation 65000 members 65002\n\nset protocols bgp group CONFED type external\nset protocols bgp group CONFED peer-as 65002\nset protocols bgp group CONFED neighbor 10.0.0.2\n</code></pre> Huawei Text Only<pre><code>bgp 65001\n  confederation id 65000\n  confederation peer-as 65002\n  peer 10.0.0.2 as-number 65002\n</code></pre> <p>\u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li>RR \u043f\u0440\u043e\u0449\u0435, \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430 \u0441\u043b\u0443\u0447\u0430\u0435\u0432</li> <li>Confederation \u043b\u0443\u0447\u0448\u0435 \u0434\u043b\u044f \u043e\u0447\u0435\u043d\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0445 AS \u0441 \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u043c\u0438 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043c\u0438</li> </ul>"},{"location":"networking/bgp/scaling.html#peer-group","title":"Peer-group","text":"<p>\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u043e\u0441\u0435\u0434\u0435\u0439 \u0441 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u043c\u0438 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430\u043c\u0438. \u0423\u043f\u0440\u043e\u0449\u0430\u0435\u0442 \u043a\u043e\u043d\u0444\u0438\u0433 \u0438 \u0441\u043d\u0438\u0436\u0430\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 CPU.</p> Juniper Text Only<pre><code>set protocols bgp group UPSTREAM type external\nset protocols bgp group UPSTREAM import IMPORT-POLICY\nset protocols bgp group UPSTREAM export EXPORT-POLICY\nset protocols bgp group UPSTREAM neighbor 10.0.0.1 peer-as 65001\nset protocols bgp group UPSTREAM neighbor 10.0.0.2 peer-as 65002\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  group UPSTREAM external\n  peer UPSTREAM as-number 65001\n  peer 10.0.0.1 group UPSTREAM\n  peer 10.0.0.2 group UPSTREAM\n#\nipv4-family unicast\n  peer UPSTREAM enable\n  peer UPSTREAM route-policy IMPORT-POLICY import\n</code></pre>"},{"location":"networking/bgp/scaling.html#dynamic-neighbors","title":"Dynamic neighbors","text":"<p>\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u0438\u0435 BGP-\u0441\u0435\u0441\u0441\u0438\u0439 \u0438\u0437 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0430 IP.</p> Juniper Text Only<pre><code>set protocols bgp group DYNAMIC-PEERS type external\nset protocols bgp group DYNAMIC-PEERS peer-as 65001\nset protocols bgp group DYNAMIC-PEERS allow 10.0.0.0/24\n</code></pre> Huawei Text Only<pre><code>bgp 65000\n  peer 10.0.0.0 255.255.255.0 as-number 65001\n</code></pre>"},{"location":"networking/bgp/scaling.html#peer-templates-huawei","title":"Peer templates (Huawei)","text":"<p>\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p> Huawei Text Only<pre><code>bgp 65000\n  peer UPSTREAM-TEMPLATE as-number 65001\n  peer UPSTREAM-TEMPLATE ebgp-max-hop 2\n  peer UPSTREAM-TEMPLATE route-policy IMPORT import\n\n  peer 10.0.0.1 inherit peer UPSTREAM-TEMPLATE\n  peer 10.0.0.2 inherit peer UPSTREAM-TEMPLATE\n</code></pre>"},{"location":"networking/ovs/index.html","title":"Open vSwitch","text":""},{"location":"networking/ovs/index.html#open-vswitch","title":"Open vSwitch","text":""},{"location":"networking/ovs/index.html#_1","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0439 \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440 \u0443\u0440\u043e\u0432\u043d\u044f L2-L4. \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 OpenFlow, VLAN, bonding, QoS. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 (OpenStack, KVM) \u0438 SDN.</p>"},{"location":"networking/ovs/index.html#_2","title":"\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<p>\u0422\u0440\u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430:</p> <p>ovsdb-server - \u0431\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. \u0425\u0440\u0430\u043d\u0438\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 bridges, ports, interfaces. \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u0435\u0440\u0435\u0436\u0438\u0432\u0430\u0435\u0442 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443.</p> <p>ovs-vswitchd - \u0434\u0435\u043c\u043e\u043d \u043a\u043e\u043c\u043c\u0443\u0442\u0430\u0442\u043e\u0440\u0430. \u0427\u0438\u0442\u0430\u0435\u0442 \u043a\u043e\u043d\u0444\u0438\u0433 \u0438\u0437 ovsdb, \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 datapath, \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 OpenFlow.</p> <p>datapath - \u043c\u043e\u0434\u0443\u043b\u044c \u044f\u0434\u0440\u0430 (\u0438\u043b\u0438 userspace/DPDK). \u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0431\u044b\u0441\u0442\u0440\u0443\u044e \u043f\u0435\u0440\u0435\u0441\u044b\u043b\u043a\u0443 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u043f\u043e \u0437\u0430\u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c flow. \u0415\u0441\u043b\u0438 flow \u043d\u0435\u0442 - \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u0430\u043a\u0435\u0442 \u0432 ovs-vswitchd.</p> <p>\u041f\u0443\u0442\u044c \u043f\u0430\u043a\u0435\u0442\u0430:</p> <ol> <li>\u041f\u0430\u043a\u0435\u0442 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u043d\u0430 \u043f\u043e\u0440\u0442</li> <li>Datapath \u0438\u0449\u0435\u0442 matching flow</li> <li>\u0415\u0441\u0442\u044c flow -&gt; \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 actions \u0432 \u044f\u0434\u0440\u0435 (\u0431\u044b\u0441\u0442\u0440\u043e)</li> <li>\u041d\u0435\u0442 flow -&gt; upcall \u0432 ovs-vswitchd -&gt; \u0440\u0435\u0448\u0435\u043d\u0438\u0435 -&gt; \u043d\u043e\u0432\u044b\u0439 flow \u0432 datapath</li> </ol>"},{"location":"networking/ovs/index.html#_3","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"networking/ovs/index.html#ovs-vsctl","title":"ovs-vsctl","text":"Bash<pre><code>ovs-vsctl show\n</code></pre> <p>\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e bridges \u0438 \u043f\u043e\u0440\u0442\u0430\u0445.</p> Bash<pre><code>ovs-vsctl list-br\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a bridges.</p> Bash<pre><code>ovs-vsctl list-ports br0\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0440\u0442\u043e\u0432 \u043d\u0430 bridge.</p> Bash<pre><code>ovs-vsctl list interface\n</code></pre> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432.</p> Bash<pre><code>ovs-vsctl get port eth0 tag\n</code></pre> <p>\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c VLAN tag \u043f\u043e\u0440\u0442\u0430.</p>"},{"location":"networking/ovs/index.html#ovs-ofctl","title":"ovs-ofctl","text":"Bash<pre><code>ovs-ofctl show br0\n</code></pre> <p>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e bridge \u0438 \u043f\u043e\u0440\u0442\u0430\u0445 (OpenFlow port numbers).</p> Bash<pre><code>ovs-ofctl dump-flows br0\n</code></pre> <p>\u0412\u0441\u0435 flow rules.</p> Bash<pre><code>ovs-ofctl dump-flows br0 table=0\n</code></pre> <p>Flows \u0438\u0437 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0442\u0430\u0431\u043b\u0438\u0446\u044b.</p> Bash<pre><code>ovs-ofctl dump-ports br0\n</code></pre> <p>\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e\u0440\u0442\u043e\u0432 (\u043f\u0430\u043a\u0435\u0442\u044b, \u0431\u0430\u0439\u0442\u044b).</p> Bash<pre><code>ovs-ofctl dump-ports-desc br0\n</code></pre> <p>\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u043e\u0432 (state, speed).</p>"},{"location":"networking/ovs/index.html#ovs-appctl","title":"ovs-appctl","text":"Bash<pre><code>ovs-appctl ofproto/trace br0 in_port=1\n</code></pre> <p>\u0422\u0440\u0430\u0441\u0441\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u0430\u043a\u0435\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 flow tables.</p> Bash<pre><code>ovs-appctl fdb/show br0\n</code></pre> <p>MAC-\u0442\u0430\u0431\u043b\u0438\u0446\u0430 (FDB).</p> Bash<pre><code>ovs-appctl dpctl/show -s\n</code></pre> <p>\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 datapath.</p> Bash<pre><code>ovs-appctl bridge/dump-flows br0\n</code></pre> <p>Flows \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u043a\u0440\u044b\u0442\u044b\u0435.</p>"},{"location":"networking/tcp/index.html","title":"TCP","text":""},{"location":"networking/tcp/index.html#tcp","title":"TCP","text":""},{"location":"networking/tcp/index.html#_1","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>Transmission Control Protocol - \u043d\u0430\u0434\u0435\u0436\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u044b\u0439 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0441 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0435\u0439 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0438 \u043f\u043e\u0440\u044f\u0434\u043a\u0430. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f (connection-oriented), \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f (ACK), \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u043f\u043e\u0442\u043e\u043a\u0430 (flow control) \u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u043f\u0435\u0440\u0435\u0433\u0440\u0443\u0437\u043e\u043a (congestion control). \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u0432 RFC 793 (1981), \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f - RFC 9293.</p>"},{"location":"networking/tcp/index.html#tcp_1","title":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a TCP","text":"Text Only<pre><code> 0                   1                   2                   3\n 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|          Source Port          |       Destination Port        |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                        Sequence Number                        |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                    Acknowledgment Number                      |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|  Data |           |U|A|P|R|S|F|                               |\n| Offset| Reserved  |R|C|S|S|Y|I|            Window             |\n|       |           |G|K|H|T|N|N|                               |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|           Checksum            |         Urgent Pointer        |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n|                    Options                    |    Padding    |\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n</code></pre> <p>\u0424\u043b\u0430\u0433\u0438 (6 \u0431\u0438\u0442):</p> <ul> <li>SYN - \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u044f sequence numbers, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f</li> <li>ACK - \u043f\u043e\u043b\u0435 Acknowledgment Number \u0432\u0430\u043b\u0438\u0434\u043d\u043e</li> <li>FIN - \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0443</li> <li>RST - \u0441\u0431\u0440\u043e\u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f</li> <li>PSH - \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \u043d\u0435\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e</li> <li>URG - \u043f\u043e\u043b\u0435 Urgent Pointer \u0432\u0430\u043b\u0438\u0434\u043d\u043e</li> </ul>"},{"location":"networking/tcp/index.html#3-way-handshake","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f (3-way handshake)","text":"Text Only<pre><code>Client                    Server\n   |                         |\n   |-------- SYN -----------&gt;|   seq=x\n   |                         |\n   |&lt;----- SYN+ACK ----------|   seq=y, ack=x+1\n   |                         |\n   |-------- ACK -----------&gt;|   seq=x+1, ack=y+1\n   |                         |\n</code></pre> <p>\u0426\u0435\u043b\u044c: \u043e\u0431\u043c\u0435\u043d \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u043c\u0438 sequence numbers, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0434\u0443\u0431\u043b\u0438\u043a\u0430\u0442\u043e\u0432 \u0441\u0442\u0430\u0440\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439.</p>"},{"location":"networking/tcp/index.html#4-way-handshake","title":"\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f (4-way handshake)","text":"Text Only<pre><code>Client                    Server\n   |                         |\n   |-------- FIN -----------&gt;|   active close\n   |                         |\n   |&lt;------- ACK ------------|\n   |                         |\n   |&lt;------- FIN ------------|   passive close\n   |                         |\n   |-------- ACK -----------&gt;|\n   |                         |\n   | (TIME_WAIT 2*MSL)       |\n</code></pre>"},{"location":"networking/tcp/index.html#tcp_2","title":"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f TCP","text":"<p>LISTEN - \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 (passive open) SYN_SENT - \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d SYN, \u0436\u0434\u0435\u043c SYN+ACK SYN_RECEIVED - \u043f\u043e\u043b\u0443\u0447\u0435\u043d SYN, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d SYN+ACK ESTABLISHED - \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e, \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 FIN_WAIT_1 - \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d FIN, \u0436\u0434\u0435\u043c ACK FIN_WAIT_2 - \u043f\u043e\u043b\u0443\u0447\u0435\u043d ACK \u043d\u0430 FIN, \u0436\u0434\u0435\u043c FIN \u043e\u0442 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b CLOSE_WAIT - \u043f\u043e\u043b\u0443\u0447\u0435\u043d FIN, \u0436\u0434\u0435\u043c close() \u043e\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f CLOSING - \u043e\u0431\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 FIN \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e LAST_ACK - \u043f\u043e\u0441\u043b\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 FIN \u0432 \u043e\u0442\u0432\u0435\u0442 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 FIN TIME_WAIT - \u0436\u0434\u0435\u043c 2*MSL (\u043e\u0431\u044b\u0447\u043d\u043e 2 \u043c\u0438\u043d\u0443\u0442\u044b) \u043f\u0435\u0440\u0435\u0434 \u043f\u043e\u043b\u043d\u044b\u043c \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435\u043c</p>"},{"location":"networking/tcp/index.html#flow-control","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u043f\u043e\u0442\u043e\u043a\u0430 (Flow Control)","text":"<p>Sliding Window - \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u043e\u0431\u0449\u0430\u0435\u0442 \u0432 \u043f\u043e\u043b\u0435 Window \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0431\u0430\u0439\u0442 \u0433\u043e\u0442\u043e\u0432 \u043f\u0440\u0438\u043d\u044f\u0442\u044c. \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u043e\u043a\u043d\u043e\u043c.</p> <p>Window = 0: \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0438 \u0448\u043b\u0435\u0442 probe-\u043f\u0430\u043a\u0435\u0442\u044b (persist timer).</p> <p>Window Scaling (RFC 1323): \u043e\u043f\u0446\u0438\u044f \u043f\u0440\u0438 handshake, \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u0443\u0435\u0442 16-\u0431\u0438\u0442\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 Window \u0434\u043e 1 GB.</p>"},{"location":"networking/tcp/index.html#congestion-control","title":"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u043f\u0435\u0440\u0435\u0433\u0440\u0443\u0437\u043e\u043a (Congestion Control)","text":"<p>RFC 5681 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 4 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430:</p> <p>Slow Start - cwnd (congestion window) \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u043c\u0430\u043b\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f - cwnd \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 1 MSS \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 ACK - \u042d\u043a\u0441\u043f\u043e\u043d\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u043e\u0441\u0442 \u0434\u043e ssthresh</p> <p>Congestion Avoidance - \u041a\u043e\u0433\u0434\u0430 cwnd &gt;= ssthresh - cwnd \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 ~1 MSS \u0437\u0430 RTT (\u043b\u0438\u043d\u0435\u0439\u043d\u044b\u0439 \u0440\u043e\u0441\u0442) - AIMD: Additive Increase, Multiplicative Decrease</p> <p>Fast Retransmit - 3 duplicate ACK -&gt; \u043d\u0435\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u0430\u044f \u0440\u0435\u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0441\u0441\u0438\u044f \u0431\u0435\u0437 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0442\u0430\u0439\u043c\u0435\u0440\u0430</p> <p>Fast Recovery - \u041f\u043e\u0441\u043b\u0435 fast retransmit: ssthresh = cwnd/2, cwnd = ssthresh + 3*MSS</p>"},{"location":"networking/tcp/index.html#_2","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":"Bash<pre><code>ss -t\n</code></pre> \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c TCP-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f. Bash<pre><code>ss -tlnp\n</code></pre> \u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043b\u0443\u0448\u0430\u044e\u0449\u0438\u0435 TCP-\u043f\u043e\u0440\u0442\u044b \u0441 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430\u043c\u0438. Bash<pre><code>ss -s\n</code></pre> \u0421\u0432\u043e\u0434\u043a\u0430 \u043f\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u043c TCP (estab, timewait, \u0438 \u0442.\u0434.). Bash<pre><code>netstat -nat | awk '{print $6}' | sort | uniq -c | sort -rn\n</code></pre> \u041f\u043e\u0434\u0441\u0447\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043f\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u043c. Bash<pre><code>tcpdump -i eth0 tcp port 80 -n\n</code></pre> \u0417\u0430\u0445\u0432\u0430\u0442 TCP-\u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 80. Bash<pre><code>tcpdump -i eth0 'tcp[tcpflags] &amp; tcp-syn != 0' -n\n</code></pre> \u0417\u0430\u0445\u0432\u0430\u0442 \u0442\u043e\u043b\u044c\u043a\u043e SYN-\u043f\u0430\u043a\u0435\u0442\u043e\u0432. Bash<pre><code>tcpdump -i any -w capture.pcap host 10.0.0.1\n</code></pre> \u0417\u0430\u043f\u0438\u0441\u044c \u0432 \u0444\u0430\u0439\u043b \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0432 Wireshark."},{"location":"networking/tcp/index.html#_3","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435:</p> Bash<pre><code>ss -tan state established\nss -tan state time-wait\nss -tan state close-wait\n</code></pre> <p>\u041c\u043d\u043e\u0433\u043e CLOSE_WAIT - \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442 \u0441\u043e\u043a\u0435\u0442\u044b (\u0431\u0430\u0433). \u041c\u043d\u043e\u0433\u043e TIME_WAIT - \u043c\u043d\u043e\u0433\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 (\u043d\u043e\u0440\u043c\u0430 \u0434\u043b\u044f HTTP).</p> <p>\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 TCP-\u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u044f\u0434\u0440\u0430:</p> Bash<pre><code>sysctl net.ipv4.tcp_fin_timeout\nsysctl net.ipv4.tcp_keepalive_time\nsysctl net.ipv4.tcp_keepalive_intvl\nsysctl net.ipv4.tcp_keepalive_probes\n</code></pre> <p>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432:</p> Bash<pre><code># \u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c FIN_WAIT_2 timeout (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 60)\nsysctl -w net.ipv4.tcp_fin_timeout=15\n\n# Keepalive: \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0447\u0435\u0440\u0435\u0437 5 \u043c\u0438\u043d\u0443\u0442 \u0432\u043c\u0435\u0441\u0442\u043e 2 \u0447\u0430\u0441\u043e\u0432\nsysctl -w net.ipv4.tcp_keepalive_time=300\n</code></pre> <p>\u0414\u043b\u044f \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 - \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 /etc/sysctl.conf:</p> Text Only<pre><code>net.ipv4.tcp_fin_timeout = 15\nnet.ipv4.tcp_keepalive_time = 300\nnet.ipv4.tcp_keepalive_intvl = 15\nnet.ipv4.tcp_keepalive_probes = 5\n</code></pre> <p>\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c: <code>sysctl -p</code></p>"},{"location":"networking/tls/index.html","title":"TLS","text":""},{"location":"networking/tls/index.html#tls","title":"TLS","text":""},{"location":"networking/tls/index.html#_1","title":"\u041a\u043e\u0440\u043e\u0442\u043a\u043e","text":"<p>Transport Layer Security - \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043c\u0435\u0436\u0434\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c \u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c. \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430\u0434 TCP (Application Layer). \u0414\u043b\u044f UDP - DTLS. \u041d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u0435\u043b\u044c \u0432\u0438\u0434\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e IP, \u043f\u043e\u0440\u0442\u044b, \u0442\u0438\u043f \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b.</p>"},{"location":"networking/tls/index.html#handshake","title":"Handshake","text":"<p>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f:</p> <ol> <li>ClientHello - \u043a\u043b\u0438\u0435\u043d\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u0435\u0440\u0441\u0438\u044e TLS, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u0448\u0438\u0444\u0440\u044b, \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</li> <li>ServerHello - \u0441\u0435\u0440\u0432\u0435\u0440 \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442 \u0448\u0438\u0444\u0440, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442</li> <li>Key Exchange - \u043e\u0431\u043c\u0435\u043d \u043a\u043b\u044e\u0447\u0430\u043c\u0438 (\u043e\u0431\u044b\u0447\u043d\u043e ECDHE)</li> <li>Finished - \u043e\u0431\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e\u0442, \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043e\u0431\u043c\u0435\u043d</li> </ol> <p>TLS 1.3: 1-RTT (\u043e\u0434\u0438\u043d round-trip). TLS 1.2: 2-RTT.</p>"},{"location":"networking/tls/index.html#session-ticket","title":"Session Ticket","text":"<p>\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439.</p> <ul> <li>\u0421\u0435\u0440\u0432\u0435\u0440 \u0448\u0438\u0444\u0440\u0443\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u0435\u0441\u0441\u0438\u0438 \u0441\u0432\u043e\u0438\u043c \u043a\u043b\u044e\u0447\u043e\u043c \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0443</li> <li>\u041a\u043b\u0438\u0435\u043d\u0442 \u043f\u0440\u0438 reconnect \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 ticket \u0432 ClientHello</li> <li>\u0421\u0435\u0440\u0432\u0435\u0440 \u0440\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u044b\u0432\u0430\u0435\u0442 - \u0441\u0435\u0441\u0441\u0438\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0431\u0435\u0437 \u043f\u043e\u043b\u043d\u043e\u0433\u043e handshake</li> <li>\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0439</li> </ul>"},{"location":"networking/tls/index.html#false-start","title":"False Start","text":"<p>\u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f: \u043a\u043b\u0438\u0435\u043d\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f handshake. \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0432\u044b\u0431\u0440\u0430\u043d \u0448\u0438\u0444\u0440 \u0441 forward secrecy.</p>"},{"location":"networking/tls/index.html#tls-13-vs-12","title":"TLS 1.3 vs 1.2","text":"<ul> <li>1.3: \u0443\u0431\u0440\u0430\u043d\u044b \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u0435 \u0448\u0438\u0444\u0440\u044b (RSA key exchange, CBC, SHA-1)</li> <li>1.3: \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 forward secrecy (ECDHE)</li> <li>1.3: 0-RTT resumption (\u0441 \u0440\u0438\u0441\u043a\u0430\u043c\u0438 replay)</li> <li>1.3: \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d handshake \u043f\u043e\u0441\u043b\u0435 ServerHello</li> </ul>"},{"location":"storage/ceph/index.html","title":"Ceph","text":""},{"location":"storage/ceph/index.html#ceph","title":"Ceph","text":""},{"location":"storage/ceph/index.html#tldr","title":"TL;DR","text":"<p>\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e-\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c\u043e\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435. \u0414\u0430\u0451\u0442 block (RBD), object (S3/Swift) \u0438 file (CephFS) storage \u0438\u0437 \u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430.</p> <ul> <li>OSD (Object Storage Daemon) \u2014 \u0445\u0440\u0430\u043d\u0438\u0442 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u0434\u0438\u0441\u043a\u0430\u0445</li> <li>MON (Monitor) \u2014 \u0441\u043b\u0435\u0434\u0438\u0442 \u0437\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430, \u0445\u0440\u0430\u043d\u0438\u0442 \u043a\u0430\u0440\u0442\u0443</li> <li>MGR (Manager) \u2014 \u043c\u0435\u0442\u0440\u0438\u043a\u0438, \u0434\u0430\u0448\u0431\u043e\u0440\u0434, \u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u043a\u0430</li> <li>MDS (Metadata Server) \u2014 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f CephFS</li> </ul>"},{"location":"storage/ceph/index.html#_1","title":"\u041f\u0430\u043a\u0435\u0442\u044b \u0438 \u043f\u0443\u0442\u0438","text":"<ul> <li>\u041f\u0430\u043a\u0435\u0442\u044b: <code>ceph</code>, <code>ceph-radosgw</code></li> <li>\u0421\u0435\u0440\u0432\u0438\u0441: <code>ceph.service</code></li> <li>\u041a\u043e\u043d\u0444\u0438\u0433: <code>/etc/ceph/ceph.conf</code></li> <li>\u041b\u043e\u0433\u0438: <code>/var/log/ceph/*</code></li> <li>Keyring: <code>/etc/ceph/ceph.client.admin.keyring</code></li> </ul>"},{"location":"storage/ceph/index.html#_2","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"storage/ceph/index.html#_3","title":"\u0421\u0442\u0430\u0442\u0443\u0441 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430","text":"Bash<pre><code>ceph status\nceph health detail\n</code></pre> \u041e\u0431\u0449\u0435\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435. HEALTH_OK / HEALTH_WARN / HEALTH_ERR. Bash<pre><code>ceph osd tree\n</code></pre> \u0414\u0435\u0440\u0435\u0432\u043e OSD \u2014 \u043a\u0430\u043a\u0438\u0435 \u0434\u0438\u0441\u043a\u0438 \u043d\u0430 \u043a\u0430\u043a\u0438\u0445 \u0445\u043e\u0441\u0442\u0430\u0445, \u0441\u0442\u0430\u0442\u0443\u0441 up/down. Bash<pre><code>ceph df\n</code></pre> \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435 \u0438 \u043f\u043e \u043f\u0443\u043b\u0430\u043c."},{"location":"storage/ceph/index.html#_4","title":"\u041f\u0443\u043b\u044b","text":"Bash<pre><code>ceph osd pool ls\n</code></pre> \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u043b\u043e\u0432. Bash<pre><code>ceph osd pool create mypool 128\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0443\u043b \u0441 128 PG (placement groups). Bash<pre><code>ceph osd pool set mypool size 3\n</code></pre> \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0440\u0435\u043f\u043b\u0438\u043a\u0430\u0446\u0438\u044e x3."},{"location":"storage/ceph/index.html#rbd-block-storage","title":"RBD (block storage)","text":"Bash<pre><code>rbd create mypool/myimage --size 10G\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u043b\u043e\u0447\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0437 10 \u0413\u0411. Bash<pre><code>rbd map mypool/myimage\n</code></pre> \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a\u0430\u043a /dev/rbdX. Bash<pre><code>rbd ls mypool\nrbd info mypool/myimage\n</code></pre> \u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0431\u0440\u0430\u0437\u043e\u0432 / \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f."},{"location":"storage/ceph/index.html#_5","title":"\u0421\u0435\u0440\u0432\u0438\u0441\u044b","text":"Bash<pre><code>ceph orch ls\nceph orch ps\n</code></pre> \u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 (cephadm). Bash<pre><code>ceph orch daemon restart osd.0\n</code></pre> \u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0434\u0435\u043c\u043e\u043d."},{"location":"storage/ceph/index.html#_6","title":"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430","text":"Bash<pre><code>ceph health\n</code></pre> \u0411\u044b\u0441\u0442\u0440\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u2014 HEALTH_OK \u0437\u043d\u0430\u0447\u0438\u0442 \u0432\u0441\u0451 \u043e\u043a. Bash<pre><code>ceph osd stat\n</code></pre> \u0421\u043a\u043e\u043b\u044c\u043a\u043e OSD \u0432\u0441\u0435\u0433\u043e / up / in. Bash<pre><code>ceph pg stat\n</code></pre> \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 placement groups."},{"location":"storage/ceph/index.html#_7","title":"\u041f\u043e\u0434\u0432\u043e\u0434\u043d\u044b\u0435 \u043a\u0430\u043c\u043d\u0438","text":"<ul> <li>\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 MON \u0434\u043b\u044f \u043a\u0432\u043e\u0440\u0443\u043c\u0430</li> <li>PG count \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u2014 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u0430\u043b\u043e \u0438\u043b\u0438 \u043c\u043d\u043e\u0433\u043e = \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b</li> <li>\u041f\u0440\u0438 \u043f\u0430\u0434\u0435\u043d\u0438\u0438 OSD \u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0431\u0430\u043b\u0430\u043d\u0441\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u2014 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0430 \u0441\u0435\u0442\u044c</li> <li><code>ceph osd pool delete</code> \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0434\u0432\u0430\u0436\u0434\u044b (\u0437\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f)</li> </ul>"},{"location":"storage/lvm/index.html","title":"LVM","text":""},{"location":"storage/lvm/index.html#lvm","title":"LVM","text":""},{"location":"storage/lvm/index.html#tldr","title":"TL;DR","text":"<ul> <li>PV (Physical Volume) \u2014 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0434\u0438\u0441\u043a/\u0440\u0430\u0437\u0434\u0435\u043b</li> <li>VG (Volume Group) \u2014 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 PV \u0432 \u043f\u0443\u043b</li> <li>LV (Logical Volume) \u2014 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b \u0438\u0437 VG</li> <li>\u041c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440 LV \u043d\u0430 \u043b\u0435\u0442\u0443, \u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043d\u0430\u043f\u0448\u043e\u0442\u044b</li> </ul>"},{"location":"storage/lvm/index.html#_1","title":"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442","text":"<p>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0434\u0438\u0441\u043a \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u043c:</p> Bash<pre><code>pvcreate /dev/sdb\nvgcreate data_vg /dev/sdb\nlvcreate -L 50G -n app_lv data_vg\nmkfs.ext4 /dev/data_vg/app_lv\nmount /dev/data_vg/app_lv /mnt/app\n</code></pre>"},{"location":"storage/lvm/index.html#_2","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"storage/lvm/index.html#_3","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435","text":"Bash<pre><code>pvcreate /dev/sdX\n</code></pre> \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0438\u0441\u043a \u043a\u0430\u043a PV. Bash<pre><code>vgcreate my_vg /dev/sdb /dev/sdc\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c VG \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 PV. Bash<pre><code>lvcreate -L 10G -n my_lv my_vg\n</code></pre> \u0421\u043e\u0437\u0434\u0430\u0442\u044c LV \u043d\u0430 10 \u0413\u0411."},{"location":"storage/lvm/index.html#_4","title":"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435","text":"Bash<pre><code>lvextend -L +5G /dev/my_vg/my_lv\nresize2fs /dev/my_vg/my_lv\n</code></pre> \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c 5 \u0413\u0411 \u043a LV \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0438\u0442\u044c \u0424\u0421 (ext4)."},{"location":"storage/lvm/index.html#_5","title":"\u0421\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u0435","text":"Bash<pre><code>umount /dev/my_vg/my_lv\ne2fsck -f /dev/my_vg/my_lv\nresize2fs /dev/my_vg/my_lv 15G\nlvreduce -L 15G /dev/my_vg/my_lv\nmount /dev/my_vg/my_lv /mnt\n</code></pre> \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u0424\u0421, \u043f\u043e\u0442\u043e\u043c LV. \u0418\u043d\u0430\u0447\u0435 \u043f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445."},{"location":"storage/lvm/index.html#_6","title":"\u0421\u043d\u0430\u043f\u0448\u043e\u0442\u044b","text":"Bash<pre><code>lvcreate -L 5G -s -n my_lv_snap /dev/my_vg/my_lv\n</code></pre> \u0421\u043d\u0430\u043f\u0448\u043e\u0442 \u0434\u043b\u044f \u0431\u044d\u043a\u0430\u043f\u0430. \u0420\u0430\u0437\u043c\u0435\u0440 \u2014 \u043f\u043e\u0434 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u0441\u043d\u0430\u043f\u0448\u043e\u0442\u0430."},{"location":"storage/lvm/index.html#_7","title":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440","text":"Bash<pre><code>pvs / pvdisplay\nvgs / vgdisplay\nlvs / lvdisplay\n</code></pre> \u041a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 / \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434."},{"location":"storage/lvm/index.html#_8","title":"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435","text":"Bash<pre><code>lvremove /dev/my_vg/my_lv\n</code></pre>"},{"location":"storage/lvm/index.html#_9","title":"\u041f\u043e\u0434\u0432\u043e\u0434\u043d\u044b\u0435 \u043a\u0430\u043c\u043d\u0438","text":"<ul> <li><code>lvreduce</code> \u0431\u0435\u0437 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e <code>resize2fs</code> = \u043f\u043e\u0442\u0435\u0440\u044f \u0434\u0430\u043d\u043d\u044b\u0445</li> <li>\u0421\u043d\u0430\u043f\u0448\u043e\u0442 \u043f\u0435\u0440\u0435\u043f\u043e\u043b\u043d\u0438\u0442\u0441\u044f \u0435\u0441\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c \u0435\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440 \u2014 \u0441\u0442\u0430\u043d\u0435\u0442 \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u043c</li> <li>\u0414\u043b\u044f XFS \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 <code>xfs_growfs</code> \u0432\u043c\u0435\u0441\u0442\u043e <code>resize2fs</code></li> </ul>"}]}